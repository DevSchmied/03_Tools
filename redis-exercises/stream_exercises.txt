1. Create a stream "mystream" and add a record.

XADD mystream * key1 value1 key2 value2


2. Add several more records to the same stream.

XADD mystream * key1 valueA
XADD mystream * key1 valueB


3. Retrieve all records currently stored in "mystream".

XRANGE mystream - +


4. Read the first 2 records from the stream.

XREAD COUNT 2 STREAMS mystream 0


5. Create a consumer group "mygroup" for the stream "mystream".
Start reading from the very beginning (0).

XGROUP CREATE mystream mygroup 0


6. Read records for consumer "consumer1" in the group "mygroup".

XREADGROUP GROUP mygroup consumer1 STREAMS mystream >


7. Acknowledge the processing of the first record 

XACK mystream mygroup <message-id>
// <message-id> must be reaplaced with the actual ID


8. Check which messages are still pending/unacknowledged.

XPENDING mystream mygroup


9. Keep only the last 2 records in "mystream".

XTRIM mystream MAXLEN 2